{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "Heat map showing the number of passengers to/from a selected city by month and year.",
    "data": {
        "url": "https://raw.githubusercontent.com/Stonkies/FIT3179_A2/main/route_data_clean.csv",  
        "format": {"type": "csv"}
    },
    "params": [
        {
            "name": "CitySelection",
            "value": "MELBOURNE", 
            "bind": {
                "input": "select",
                "options": [
    "ADELAIDE", "ALBURY", "ALICE SPRINGS", "ARMIDALE", "AYERS ROCK", "BALLINA", 
    "BRISBANE", "BROOME", "BUNDABERG", "BURNIE", "CAIRNS", "CANBERRA", 
    "COFFS HARBOUR", "DARWIN", "DEVONPORT", "DUBBO", "EMERALD", "GERALDTON", 
    "GLADSTONE", "GOLD COAST", "HAMILTON ISLAND", "HERVEY BAY", "HOBART", 
    "KALGOORLIE", "KARRATHA", "LAUNCESTON", "MACKAY", "MELBOURNE", "MILDURA", 
    "MORANBAH", "MOUNT ISA", "NEWMAN", "NEWCASTLE", "PERTH", "PORT HEDLAND", 
    "PORT LINCOLN", "PORT MACQUARIE", "PROSERPINE", "ROCKHAMPTON", "SUNSHINE COAST", 
    "SYDNEY", "TAMWORTH", "TOWNSVILLE", "WAGGA WAGGA"
                ],
                "name": "City "
            }
        }
    ],
    "transform": [
        {
            "fold": ["City1", "City2"],
            "as": ["CityRole", "City"]
        },
        {
            "filter": "datum.City != null"
        },
        {   
            "filter": "datum.City == CitySelection"
        },
        {
            "calculate": "datetime(datum.Year, datum.Month_num - 1, 1)",
            "as": "Date"
        }
    ],
    "mark": "rect",
    "width": 600,
    "height": 600,
    "encoding": {
        "x": {
            "field": "Date",
            "type": "ordinal",
            "timeUnit": "month",
            "title": "Month",
            "axis": {"labelAngle": 0, "format": "%b"}
        },
        "y": {
            "field": "Date",
            "type": "ordinal",
            "timeUnit": "year",
            "title": "Year"
        },
        "color": {
            "aggregate": "sum",
            "field": "Passenger_Trips",
            "type": "quantitative",
            "title": "Total Passengers",
            "scale": {
                "type": "linear",
                "range": ["blue", "orange", "red"]
            }
        },
        "tooltip": [
            {"field": "Year", "type": "ordinal", "title": "Year"},
            {
                "field": "Date",
                "type": "ordinal",
                "timeUnit": "month",
                "title": "Month",
                "format": "%B"
            },
            {
                "aggregate": "sum",
                "field": "Passenger_Trips",
                "type": "quantitative",
                "title": "Total Passengers",
                "format": ","
            }
        ]
    }
}
